generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Transportadora {
  id                   Int                  @id @default(autoincrement())
  razaoSocial          String
  cnpj                 String               @unique
  uf                   String               @db.VarChar(2)
  quimicosControlados  Boolean              @default(false)
  disponivelParaFrete  Boolean              @default(false)
  registros            RegistroDocumento[]
  createdAt            DateTime             @default(now())
  updatedAt            DateTime             @updatedAt
}

model Documento {
  id             Int                  @id @default(autoincrement())
  codigo         String               @unique
  nome           String
  obgQuimicos    Boolean              @default(false)
  obgNaoQuimicos Boolean              @default(false)
  registros      RegistroDocumento[]
}

model RegistroDocumento {
  id               Int           @id @default(autoincrement())
  transportadoraId Int
  documentoId      Int
  validade         DateTime?
  urlArquivo       String?

  transportadora   Transportadora @relation(fields: [transportadoraId], references: [id], onDelete: Cascade)
  documento        Documento      @relation(fields: [documentoId], references: [id], onDelete: Restrict)

  createdAt        DateTime       @default(now())
}